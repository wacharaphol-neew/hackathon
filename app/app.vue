<script setup>

import '@n8n/chat/style.css';
import { createChat } from '@n8n/chat';
useHead({
  meta: [
    { name: 'viewport', content: 'width=device-width, initial-scale=1' }
  ],
  link: [
    { rel: 'icon', href: '/favicon.ico' }
  ],
  htmlAttrs: {
    lang: 'en'
  }
})

const title = 'Nuxt Starter Template'
const description = 'A production-ready starter template powered by Nuxt UI. Build beautiful, accessible, and performant applications in minutes, not hours.'

useSeoMeta({
  title,
  description,
  ogTitle: title,
  ogDescription: description,
  ogImage: 'https://ui.nuxt.com/assets/templates/nuxt/starter-light.png',
  twitterImage: 'https://ui.nuxt.com/assets/templates/nuxt/starter-light.png',
  twitterCard: 'summary_large_image'
})

const colorMode = useColorMode();

onMounted(async() => {
  colorMode.preference = "light"

  await fetch("https://n8n.kisra.co.th/webhook/437aa980-058c-4523-b395-cdeb8c280c4c").then((res) => res.json());
    createChat({
      webhookUrl:
        "https://n8n.kisra.co.th/webhook/08f6878b-254e-46ff-bda5-90ce7de8f7f5/chat",
      initialMessages: [
        // `à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š à¸„à¸¸à¸“ ${user?.name} ðŸ‘‹`,
        "à¸œà¸¡à¸„à¸·à¸­ Mind Mood à¸œà¸¹à¹‰à¹€à¸Šà¸µà¹ˆà¸¢à¸§à¸Šà¸²à¸à¸”à¹‰à¸²à¸™à¸ªà¸¸à¸‚à¸ à¸²à¸žà¸ˆà¸´à¸•  à¸¡à¸µà¸­à¸°à¹„à¸£à¹ƒà¸«à¹‰à¸œà¸¡à¸Šà¹ˆà¸§à¸¢à¹„à¸”à¹‰à¸šà¹‰à¸²à¸‡à¸„à¸£à¸±à¸š?",
      ],
      i18n: {
        en: {
          title: "ðŸ’¬ Chat with Mind Mood",
          subtitle: "à¸œà¸¡à¸„à¸·à¸­ Mind Mood",
          inputPlaceholder: "à¸žà¸´à¸¡à¸žà¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“...",
          getStarted: "à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š! ðŸ‘‹",
          startMessage: "à¹€à¸£à¸´à¹ˆà¸¡à¹à¸Šà¸—à¸à¸±à¸šà¹€à¸£à¸² à¹€à¸£à¸²à¸žà¸£à¹‰à¸­à¸¡à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­à¸„à¸¸à¸“à¸•à¸¥à¸­à¸” 24 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡",
          footer: "à¸‚à¸±à¸šà¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¹‚à¸”à¸¢ Mind Mood",
          closeButtonTooltip: "à¸›à¸´à¸”",
        },
      },
    });

})

const signOut = () => {
  useCookie('auth').value = null
  navigateTo('/login')
}
const route = useRoute()

</script>

<template>
  <UApp>

    <UMain>
      <NuxtPage />
      <div class="fixed bottom-0 py-2 bg-green-300 w-full" v-if="route.path != '/login' && route.path != '/success'">
        <div class=" flex justify-center">
          <button @click="signOut()" class="bg-green-500 text-white px-4 py-2 rounded-2xl">logout</button>
        </div>
      </div>
    </UMain>

    
  </UApp>
</template>
